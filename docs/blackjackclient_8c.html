<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BlackJack client: blackjackclient.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">BlackJack client<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">client for blackjack project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('blackjackclient_8c.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">blackjackclient.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>contains functions for handling the blackjack server. The code in this file is not meant for usage in other projects. Don't include without changes. Global variables are used to avoid deallocation and reallocation of memory when not needed. If changing the code to support a server different from localhost, this design would not work and changes would be needed.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;windows.h&gt;</code><br />
<code>#include &lt;winsock2.h&gt;</code><br />
<code>#include &lt;WS2tcpip.h&gt;</code><br />
<code>#include &lt;iphlpapi.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="blackjackclient_8h_source.html">blackjackclient.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac7bef5d85e3dcd73eef56ad39ffc84a9" id="r_ac7bef5d85e3dcd73eef56ad39ffc84a9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac7bef5d85e3dcd73eef56ad39ffc84a9">WIN32_LEAN_AND_MEAN</a></td></tr>
<tr class="memitem:a16b710f592bf8f7900666392adc444dc" id="r_a16b710f592bf8f7900666392adc444dc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a16b710f592bf8f7900666392adc444dc">DEFAULT_PORT</a>&#160;&#160;&#160;&quot;27015&quot;</td></tr>
<tr class="memitem:a5261516a174b035b084a9ae06dc85730" id="r_a5261516a174b035b084a9ae06dc85730"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5261516a174b035b084a9ae06dc85730">DEFAULT_BUFLEN</a>&#160;&#160;&#160;128</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a46274ed155268e6193b079e2b8cfb1e7" id="r_a46274ed155268e6193b079e2b8cfb1e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a46274ed155268e6193b079e2b8cfb1e7">close_connection</a> ()</td></tr>
<tr class="memdesc:a46274ed155268e6193b079e2b8cfb1e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">small util function to improve readability  <br /></td></tr>
<tr class="memitem:a863da88e5f936b725ec60144848eba80" id="r_a863da88e5f936b725ec60144848eba80"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a863da88e5f936b725ec60144848eba80">client_connection_init</a> ()</td></tr>
<tr class="memdesc:a863da88e5f936b725ec60144848eba80"><td class="mdescLeft">&#160;</td><td class="mdescRight">connects the client to the server. client connects always to port 27015 of localhost through an IPv4 IP. return value is 1 if errors happened, 0 if connection was successful.  <br /></td></tr>
<tr class="memitem:aeb3651c2245f92914cb10656086b6516" id="r_aeb3651c2245f92914cb10656086b6516"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeb3651c2245f92914cb10656086b6516">server_login</a> (char username[], char password[], <a class="el" href="blackjackclient_8h.html#a23019fff8b2aa14500e743b95c9c8e76">MODE</a> mode)</td></tr>
<tr class="memdesc:aeb3651c2245f92914cb10656086b6516"><td class="mdescLeft">&#160;</td><td class="mdescRight">starts the login process or the register process based on mode. The client will first send an "Username:&lt;value&gt;" query, which tells the server to save the given username for use. It will then send a "Password:&lt;value&gt;" query, which tells the server to save the given password for use. In the end, either a "Login" or a "Register" query is sent, which tells the server what operation to execute. The server can return "logok" or "logfail" for login and "regok" or "regfail" for register. Those values are used to determine if operation was successful. Return value is 1 if errors happened, 0 if connection was successful.  <br /></td></tr>
<tr class="memitem:ac6e5b203c0dedb9cb2cf0f8b01365549" id="r_ac6e5b203c0dedb9cb2cf0f8b01365549"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac6e5b203c0dedb9cb2cf0f8b01365549">money_value_update</a> (int modify_value)</td></tr>
<tr class="memdesc:ac6e5b203c0dedb9cb2cf0f8b01365549"><td class="mdescLeft">&#160;</td><td class="mdescRight">changes the amount of money the player has by modify_value A "Modify:&lt;value&gt;" query is sent to the server, which then changes the amount of money the current user has by . For the modify query the server uses the username and password that were saved during the login process. To avoid unintended behaviour, always call this function when sure that an user completed the login process. Return value is 1 if errors happened, 0 if connection was successful.  <br /></td></tr>
<tr class="memitem:ab486757de4cff55ef0f57a16ebfd2c42" id="r_ab486757de4cff55ef0f57a16ebfd2c42"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab486757de4cff55ef0f57a16ebfd2c42">money_value_get</a> ()</td></tr>
<tr class="memdesc:ab486757de4cff55ef0f57a16ebfd2c42"><td class="mdescLeft">&#160;</td><td class="mdescRight">gets the amount of money the player has. The client sends a "GetVal" query to the server, which then returns a string with the amount of money the player has. The server uses the username and password that were saved during the login process. To avoid unintended behaviour, always call this function when sure that an user completed the login process. Return value is the amount of money the player has NOTE: in the current implementation, the function returns 1 in case of failure. This can be noticed since the value will not change with wins or losses in the game.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>contains functions for handling the blackjack server. The code in this file is not meant for usage in other projects. Don't include without changes. Global variables are used to avoid deallocation and reallocation of memory when not needed. If changing the code to support a server different from localhost, this design would not work and changes would be needed. </p>
</div><a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="a5261516a174b035b084a9ae06dc85730" name="a5261516a174b035b084a9ae06dc85730"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5261516a174b035b084a9ae06dc85730">&#9670;&#160;</a></span>DEFAULT_BUFLEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_BUFLEN&#160;&#160;&#160;128</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a16b710f592bf8f7900666392adc444dc" name="a16b710f592bf8f7900666392adc444dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16b710f592bf8f7900666392adc444dc">&#9670;&#160;</a></span>DEFAULT_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_PORT&#160;&#160;&#160;&quot;27015&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac7bef5d85e3dcd73eef56ad39ffc84a9" name="ac7bef5d85e3dcd73eef56ad39ffc84a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7bef5d85e3dcd73eef56ad39ffc84a9">&#9670;&#160;</a></span>WIN32_LEAN_AND_MEAN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WIN32_LEAN_AND_MEAN</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a863da88e5f936b725ec60144848eba80" name="a863da88e5f936b725ec60144848eba80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a863da88e5f936b725ec60144848eba80">&#9670;&#160;</a></span>client_connection_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int client_connection_init </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>connects the client to the server. client connects always to port 27015 of localhost through an IPv4 IP. return value is 1 if errors happened, 0 if connection was successful. </p>

</div>
</div>
<a id="a46274ed155268e6193b079e2b8cfb1e7" name="a46274ed155268e6193b079e2b8cfb1e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46274ed155268e6193b079e2b8cfb1e7">&#9670;&#160;</a></span>close_connection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void close_connection </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>small util function to improve readability </p>

</div>
</div>
<a id="ab486757de4cff55ef0f57a16ebfd2c42" name="ab486757de4cff55ef0f57a16ebfd2c42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab486757de4cff55ef0f57a16ebfd2c42">&#9670;&#160;</a></span>money_value_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int money_value_get </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gets the amount of money the player has. The client sends a "GetVal" query to the server, which then returns a string with the amount of money the player has. The server uses the username and password that were saved during the login process. To avoid unintended behaviour, always call this function when sure that an user completed the login process. Return value is the amount of money the player has NOTE: in the current implementation, the function returns 1 in case of failure. This can be noticed since the value will not change with wins or losses in the game. </p>

</div>
</div>
<a id="ac6e5b203c0dedb9cb2cf0f8b01365549" name="ac6e5b203c0dedb9cb2cf0f8b01365549"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6e5b203c0dedb9cb2cf0f8b01365549">&#9670;&#160;</a></span>money_value_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int money_value_update </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>modify_value</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>changes the amount of money the player has by modify_value A "Modify:&lt;value&gt;" query is sent to the server, which then changes the amount of money the current user has by . For the modify query the server uses the username and password that were saved during the login process. To avoid unintended behaviour, always call this function when sure that an user completed the login process. Return value is 1 if errors happened, 0 if connection was successful. </p>

</div>
</div>
<a id="aeb3651c2245f92914cb10656086b6516" name="aeb3651c2245f92914cb10656086b6516"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb3651c2245f92914cb10656086b6516">&#9670;&#160;</a></span>server_login()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int server_login </td>
          <td>(</td>
          <td class="paramtype">char</td>          <td class="paramname"><span class="paramname"><em>username</em></span>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char</td>          <td class="paramname"><span class="paramname"><em>password</em></span>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="blackjackclient_8h.html#a23019fff8b2aa14500e743b95c9c8e76">MODE</a></td>          <td class="paramname"><span class="paramname"><em>mode</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>starts the login process or the register process based on mode. The client will first send an "Username:&lt;value&gt;" query, which tells the server to save the given username for use. It will then send a "Password:&lt;value&gt;" query, which tells the server to save the given password for use. In the end, either a "Login" or a "Register" query is sent, which tells the server what operation to execute. The server can return "logok" or "logfail" for login and "regok" or "regfail" for register. Those values are used to determine if operation was successful. Return value is 1 if errors happened, 0 if connection was successful. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="blackjackclient_8c.html">blackjackclient.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
