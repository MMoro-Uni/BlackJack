<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BlackJack server: dbfunctions.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">BlackJack server<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">server for blackjack project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('dbfunctions_8c.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">dbfunctions.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Contains code for managing the database. Code inside this file and its header is not meant for usage in other projects.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;sqlite3.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="dbfunctions_8h_source.html">dbfunctions.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adcd0c428e3e88e30fa0fc969c1084012" id="r_adcd0c428e3e88e30fa0fc969c1084012"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adcd0c428e3e88e30fa0fc969c1084012">login_callback</a> (void *data, int columns, char **row_fields, char **row_names)</td></tr>
<tr class="memdesc:adcd0c428e3e88e30fa0fc969c1084012"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback function for SQLite SELECT the function doesn't do much with the data it gets in input, but returns the amount of columns matching details given. if the return value is &gt;0 that means something was found with the given credentials, meaning login was successful.  <br /></td></tr>
<tr class="memitem:a3a58af483f51cd369e6f1703fa9c3b2d" id="r_a3a58af483f51cd369e6f1703fa9c3b2d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3a58af483f51cd369e6f1703fa9c3b2d">get_money_callback</a> (char *var_pointer, int columns, char **row_fields, char **row_names)</td></tr>
<tr class="memitem:ad1219a558108d6ccb270dc58f38d0aab" id="r_ad1219a558108d6ccb270dc58f38d0aab"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad1219a558108d6ccb270dc58f38d0aab">GameLogin</a> (char username[], char password[], sqlite3 *ConnectedDB)</td></tr>
<tr class="memdesc:ad1219a558108d6ccb270dc58f38d0aab"><td class="mdescLeft">&#160;</td><td class="mdescRight">function to login into database Tries to log into databse using given username and password. Data is looked for in a LoginTable table containing usernames and their associated passwords. LoginTable must be inside the sqlite3 object passed to the function.  <br /></td></tr>
<tr class="memitem:a527c6ee7fe6af1480b24eafcf8e6c5f2" id="r_a527c6ee7fe6af1480b24eafcf8e6c5f2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a527c6ee7fe6af1480b24eafcf8e6c5f2">GameRegister</a> (char username[], char password[], sqlite3 *ConnectedDB)</td></tr>
<tr class="memdesc:a527c6ee7fe6af1480b24eafcf8e6c5f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">function to register into database Creates a new row in the login table and creates a new row in the money table for given user. Data is created in LoginTable and MoneyTable. Tables must be inside the sqlite3 object passes to the function.  <br /></td></tr>
<tr class="memitem:aef5059db93822ed0c4c4b34db78ef1b9" id="r_aef5059db93822ed0c4c4b34db78ef1b9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aef5059db93822ed0c4c4b34db78ef1b9">AlterMoney</a> (char username[], char password[], int value_modifier, sqlite3 *ConnectedDB)</td></tr>
<tr class="memdesc:aef5059db93822ed0c4c4b34db78ef1b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">alters the amount of money the given user has by value_modifier The function first checks if the user exists in LoginTable through <a class="el" href="#ad1219a558108d6ccb270dc58f38d0aab" title="function to login into database Tries to log into databse using given username and password....">GameLogin()</a> If user exists, the username is used to modify the correct value in MoneyTable. value_modifier is added to the Value field in the selected MoneyTable row. LoginTable and MoneyTable must be inside the given sqlite3 object.  <br /></td></tr>
<tr class="memitem:a0840ca9f64e3c4a279a05a461c57b9d8" id="r_a0840ca9f64e3c4a279a05a461c57b9d8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0840ca9f64e3c4a279a05a461c57b9d8">GetMoney</a> (char username[], char password[], char money_buffer[], sqlite3 *ConnectedDB)</td></tr>
<tr class="memdesc:a0840ca9f64e3c4a279a05a461c57b9d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">gets the amount of money the given user has and puts it into money_buffer The function first checks if the user exists in LoginTable through <a class="el" href="#ad1219a558108d6ccb270dc58f38d0aab" title="function to login into database Tries to log into databse using given username and password....">GameLogin()</a> If user exists, the username is used to get the correct value from MoneyTable. The obtained value is then copied as a string into money_buffer[]. Tables must be inside the sqlite3 object passed to the function.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contains code for managing the database. Code inside this file and its header is not meant for usage in other projects. </p>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="aef5059db93822ed0c4c4b34db78ef1b9" name="aef5059db93822ed0c4c4b34db78ef1b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef5059db93822ed0c4c4b34db78ef1b9">&#9670;&#160;</a></span>AlterMoney()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AlterMoney </td>
          <td>(</td>
          <td class="paramtype">char</td>          <td class="paramname"><span class="paramname"><em>username</em></span>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char</td>          <td class="paramname"><span class="paramname"><em>password</em></span>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>value_modifier</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>ConnectedDB</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>alters the amount of money the given user has by value_modifier The function first checks if the user exists in LoginTable through <a class="el" href="#ad1219a558108d6ccb270dc58f38d0aab" title="function to login into database Tries to log into databse using given username and password....">GameLogin()</a> If user exists, the username is used to modify the correct value in MoneyTable. value_modifier is added to the Value field in the selected MoneyTable row. LoginTable and MoneyTable must be inside the given sqlite3 object. </p>

</div>
</div>
<a id="ad1219a558108d6ccb270dc58f38d0aab" name="ad1219a558108d6ccb270dc58f38d0aab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1219a558108d6ccb270dc58f38d0aab">&#9670;&#160;</a></span>GameLogin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int GameLogin </td>
          <td>(</td>
          <td class="paramtype">char</td>          <td class="paramname"><span class="paramname"><em>username</em></span>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char</td>          <td class="paramname"><span class="paramname"><em>password</em></span>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>ConnectedDB</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>function to login into database Tries to log into databse using given username and password. Data is looked for in a LoginTable table containing usernames and their associated passwords. LoginTable must be inside the sqlite3 object passed to the function. </p>

</div>
</div>
<a id="a527c6ee7fe6af1480b24eafcf8e6c5f2" name="a527c6ee7fe6af1480b24eafcf8e6c5f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a527c6ee7fe6af1480b24eafcf8e6c5f2">&#9670;&#160;</a></span>GameRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int GameRegister </td>
          <td>(</td>
          <td class="paramtype">char</td>          <td class="paramname"><span class="paramname"><em>username</em></span>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char</td>          <td class="paramname"><span class="paramname"><em>password</em></span>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>ConnectedDB</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>function to register into database Creates a new row in the login table and creates a new row in the money table for given user. Data is created in LoginTable and MoneyTable. Tables must be inside the sqlite3 object passes to the function. </p>

</div>
</div>
<a id="a3a58af483f51cd369e6f1703fa9c3b2d" name="a3a58af483f51cd369e6f1703fa9c3b2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a58af483f51cd369e6f1703fa9c3b2d">&#9670;&#160;</a></span>get_money_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_money_callback </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>var_pointer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>columns</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **</td>          <td class="paramname"><span class="paramname"><em>row_fields</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **</td>          <td class="paramname"><span class="paramname"><em>row_names</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0840ca9f64e3c4a279a05a461c57b9d8" name="a0840ca9f64e3c4a279a05a461c57b9d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0840ca9f64e3c4a279a05a461c57b9d8">&#9670;&#160;</a></span>GetMoney()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int GetMoney </td>
          <td>(</td>
          <td class="paramtype">char</td>          <td class="paramname"><span class="paramname"><em>username</em></span>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char</td>          <td class="paramname"><span class="paramname"><em>password</em></span>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char</td>          <td class="paramname"><span class="paramname"><em>money_buffer</em></span>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>ConnectedDB</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gets the amount of money the given user has and puts it into money_buffer The function first checks if the user exists in LoginTable through <a class="el" href="#ad1219a558108d6ccb270dc58f38d0aab" title="function to login into database Tries to log into databse using given username and password....">GameLogin()</a> If user exists, the username is used to get the correct value from MoneyTable. The obtained value is then copied as a string into money_buffer[]. Tables must be inside the sqlite3 object passed to the function. </p>

</div>
</div>
<a id="adcd0c428e3e88e30fa0fc969c1084012" name="adcd0c428e3e88e30fa0fc969c1084012"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcd0c428e3e88e30fa0fc969c1084012">&#9670;&#160;</a></span>login_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int login_callback </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>columns</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **</td>          <td class="paramname"><span class="paramname"><em>row_fields</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **</td>          <td class="paramname"><span class="paramname"><em>row_names</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>callback function for SQLite SELECT the function doesn't do much with the data it gets in input, but returns the amount of columns matching details given. if the return value is &gt;0 that means something was found with the given credentials, meaning login was successful. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dbfunctions_8c.html">dbfunctions.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
